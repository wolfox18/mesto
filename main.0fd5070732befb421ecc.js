(()=>{"use strict";var e={147:(e,t,n)=>{e.exports=n.p+"02181eab80fe264248fc.jpg"}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.m=e,n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.b=document.baseURI||self.location.href,(()=>{function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._imageUrl=e.imageUrl,this._name=e.name,this._selector=n,this._handleCardClick=r}var n,r;return n=t,(r=[{key:"_generateTemplate",value:function(){return document.querySelector(this._selector).content.querySelector(".element").cloneNode(!0)}},{key:"_addLikeListener",value:function(){var e=this;this._likeButtonElement.addEventListener("click",(function(){e._likeButtonElement.classList.toggle("element__like_active")}))}},{key:"_setDeleteListener",value:function(){var e=this;this._cardElement.querySelector(".element__delete-button").addEventListener("click",(function(){e._cardElement.remove()}))}},{key:"_setPreviewListener",value:function(){var e=this;this._imageElement.addEventListener("click",(function(){e._handleCardClick({name:e._name,imageUrl:e._imageUrl})}))}},{key:"_setEventListeners",value:function(){this._addLikeListener(),this._setDeleteListener(),this._setPreviewListener()}},{key:"generateCard",value:function(){return this._cardElement=this._generateTemplate(),this._likeButtonElement=this._cardElement.querySelector(".element__like"),this._imageElement=this._cardElement.querySelector(".element__image"),this._imageElement.src=this._imageUrl,this._imageElement.alt=this._name,this._cardElement.querySelector(".element__title").textContent=this._name,this._setEventListeners(),this._cardElement}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(),r=[{name:"Амстердам",imageUrl:"https://images.unsplash.com/photo-1584003564911-a7a321c84e1c?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=984&q=80"},{name:"Киев",imageUrl:new URL(n(147),n.b)},{name:"Массачусетский технологический институт",imageUrl:"https://images.unsplash.com/photo-1529437107445-717bf63d8062?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80"},{name:"Осака",imageUrl:"https://images.unsplash.com/photo-1575489129683-4f7d23379975?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=735&q=80"},{name:"Сингапур",imageUrl:"https://images.unsplash.com/photo-1505662695181-d4b60363d2a3?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1013&q=80"},{name:"Нью-Йорк",imageUrl:"https://images.unsplash.com/photo-1524099163253-32b7f0256868?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80"}];function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formElement=n,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._inputList=Array.from(this._formElement.querySelectorAll(t.inputSelector)),this._buttonElement=this._formElement.querySelector(t.submitButtonSelector)}var t,n;return t=e,(n=[{key:"_checkValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),n.textContent=t}},{key:"_hideInputError",value:function(e,t){var n=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),n.textContent=""}},{key:"_disableSubmitButton",value:function(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0}},{key:"_enableSubmitButton",value:function(){this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this._disableSubmitButton():this._enableSubmitButton()}},{key:"_setEventListners",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkValidity(t),e._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListners()}},{key:"resetValidation",value:function(){this._toggleButtonState()}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"_clear",value:function(){this._container.innerHTML=""}},{key:"renderItems",value:function(){var e=this;this._clear(),this._items.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(t,n){var r,o,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o=function(e){"Escape"===e.code&&i.close()},(r="_handleEscClose")in this?Object.defineProperty(this,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):this[r]=o,this._element=document.querySelector(n),this._openedClass=t.openedClass,this._closeButton=this._element.querySelector(t.closeButtonSelector)}var t,n;return t=e,(n=[{key:"open",value:function(){this._element.classList.add(this._openedClass),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._element.classList.remove(this._openedClass),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleCloseByClick",value:function(e){e.target===e.currentTarget&&this.close()}},{key:"setEventListeners",value:function(){this._closeButton.addEventListener("click",this.close.bind(this)),this._element.addEventListener("mousedown",this._handleCloseByClick.bind(this))}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=m(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},p.apply(this,arguments)}function m(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function y(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(r);if(o){var n=_(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return y(this,e)});function a(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e,t))._formElement=r._element.querySelector(e.formSelector),r._inputList=Array.from(r._formElement.querySelectorAll(e.inputSelector)),r._handleFormSubmit=n.handleFormSubmit,r}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputData={},this._inputList.forEach((function(t){e._inputData[t.name]=t.value})),this._inputData}},{key:"setEventListeners",value:function(){var e=this;this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues()),e.close()})),p(_(a.prototype),"setEventListeners",this).call(this)}},{key:"close",value:function(){p(_(a.prototype),"close",this).call(this),this._formElement.reset()}},{key:"setInputValues",value:function(e){this._inputList.forEach((function(t){t.value=e[t.name]}))}}])&&f(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(c);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=w(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},g.apply(this,arguments)}function w(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}function S(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k(r);if(o){var n=k(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return S(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e,t))._nameElement=n._element.querySelector(e.nameSelector),n._imageElement=n._element.querySelector(e.imageSelector),n}return t=a,(n=[{key:"open",value:function(e){var t=e.name,n=e.imageUrl;this._nameElement.textContent=t,this._imageElement.alt=t,this._imageElement.src=n,g(k(a.prototype),"open",this).call(this)}}])&&v(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(c);function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var j={},L={openedClass:"popup_opened",closeButtonSelector:".popup__close-btn",inputSelector:".popup__input",formSelector:".popup__form",nameSelector:".popup__image-name",imageSelector:".popup__image"},C=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameElement=document.querySelector(t.nameSelector),this._bioElement=document.querySelector(t.bioSelector)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._nameElement.textContent,bio:this._bioElement.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.bio;this._nameElement.textContent=t,this._bioElement.textContent=n}}])&&x(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}())({nameSelector:".profile__name",bioSelector:".profile__description"}),B=new d(L,".popup_type_profile",{handleFormSubmit:function(e){C.setUserInfo(e)}});B.setEventListeners(),document.querySelector(".profile__edit-btn").addEventListener("click",(function(e){B.setInputValues(C.getUserInfo()),B.open()}));var P=new O(L,".popup_type_image");P.setEventListeners();var q=function(e){P.open(e)},I=function(e){return new t(e,"#element-template",q).generateCard()},D=new l({items:r,renderer:function(e){D.addItem(I(e))}},".elements__list");D.renderItems();var R,T=new d(L,".popup_type_new-element",{handleFormSubmit:function(e){D.addItem(I(e))}});T.setEventListeners(),document.querySelector(".profile__post-add").addEventListener("click",(function(e){j["card-form"].resetValidation(),T.open()})),R={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__save-btn",inactiveButtonClass:"button_inactive",inputErrorClass:"popup__input_type_error"},Array.from(document.querySelectorAll(R.formSelector)).forEach((function(e){var t=new i(R,e),n=e.getAttribute("name");j[n]=t,t.enableValidation()}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkMsRUFicEJDLEVBQWtCLElBQUl0QyxFQUFja0IsRUFBYywwQkFBMkIsQ0FDakZiLGlCQUFrQixTQUFDTyxHQUNqQnNCLEVBQVNDLFFBQVFILEVBQVdwQixHQUM3QixJQUVIMEIsRUFBZ0JiLG9CQUNoQmpJLFNBQ0d1QixjQUFjLHNCQUNkSSxpQkFBaUIsU0FBUyxTQUFDK0QsR0FDMUIrQixFQUFlLGFBQWFzQixrQkFDNUJELEVBQWdCVixNQUNqQixJQUV1QlMsRURoRU0sQ0FDOUJsQyxhQUFjLGVBQ2RyRCxjQUFlLGdCQUNmRSxxQkFBc0IsbUJBQ3RCVCxvQkFBcUIsa0JBQ3JCRSxnQkFBaUIsMkJDNERBRSxNQUFNQyxLQUFLcEQsU0FBU3FELGlCQUFpQndGLEVBQU9sQyxlQUNwRGxDLFNBQVEsU0FBQzdCLEdBQ2hCLElBQU1vRyxFQUFZLElBQUl0RyxFQUFjbUcsRUFBUWpHLEdBQ3RDcUcsRUFBV3JHLEVBQVlzRyxhQUFhLFFBQzFDekIsRUFBZXdCLEdBQVlELEVBQzNCQSxFQUFVRyxrQkFDWCxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLXdlYnBhY2svd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLXdlYnBhY2svd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly9wcmFjdGljdW0td2VicGFjay93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3ByYWN0aWN1bS13ZWJwYWNrL3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3ByYWN0aWN1bS13ZWJwYWNrL3dlYnBhY2svcnVudGltZS9qc29ucCBjaHVuayBsb2FkaW5nIiwid2VicGFjazovL3ByYWN0aWN1bS13ZWJwYWNrLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0td2VicGFjay8uL3NyYy91dGlscy9pbml0aWFsLWNhcmRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS13ZWJwYWNrLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0td2VicGFjay8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLXdlYnBhY2svLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0td2VicGFjay8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLXdlYnBhY2svLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0td2VicGFjay8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS13ZWJwYWNrLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0td2VicGFjay8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbl9fd2VicGFja19yZXF1aXJlX18ubSA9IF9fd2VicGFja19tb2R1bGVzX187XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsInZhciBzY3JpcHRVcmw7XG5pZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5nLmltcG9ydFNjcmlwdHMpIHNjcmlwdFVybCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5sb2NhdGlvbiArIFwiXCI7XG52YXIgZG9jdW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcuZG9jdW1lbnQ7XG5pZiAoIXNjcmlwdFVybCAmJiBkb2N1bWVudCkge1xuXHRpZiAoZG9jdW1lbnQuY3VycmVudFNjcmlwdClcblx0XHRzY3JpcHRVcmwgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0LnNyY1xuXHRpZiAoIXNjcmlwdFVybCkge1xuXHRcdHZhciBzY3JpcHRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIik7XG5cdFx0aWYoc2NyaXB0cy5sZW5ndGgpIHNjcmlwdFVybCA9IHNjcmlwdHNbc2NyaXB0cy5sZW5ndGggLSAxXS5zcmNcblx0fVxufVxuLy8gV2hlbiBzdXBwb3J0aW5nIGJyb3dzZXJzIHdoZXJlIGFuIGF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgeW91IG11c3Qgc3BlY2lmeSBhbiBvdXRwdXQucHVibGljUGF0aCBtYW51YWxseSB2aWEgY29uZmlndXJhdGlvblxuLy8gb3IgcGFzcyBhbiBlbXB0eSBzdHJpbmcgKFwiXCIpIGFuZCBzZXQgdGhlIF9fd2VicGFja19wdWJsaWNfcGF0aF9fIHZhcmlhYmxlIGZyb20geW91ciBjb2RlIHRvIHVzZSB5b3VyIG93biBsb2dpYy5cbmlmICghc2NyaXB0VXJsKSB0aHJvdyBuZXcgRXJyb3IoXCJBdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlclwiKTtcbnNjcmlwdFVybCA9IHNjcmlwdFVybC5yZXBsYWNlKC8jLiokLywgXCJcIikucmVwbGFjZSgvXFw/LiokLywgXCJcIikucmVwbGFjZSgvXFwvW15cXC9dKyQvLCBcIi9cIik7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBzY3JpcHRVcmw7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5iID0gZG9jdW1lbnQuYmFzZVVSSSB8fCBzZWxmLmxvY2F0aW9uLmhyZWY7XG5cbi8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4vLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbi8vIFtyZXNvbHZlLCByZWplY3QsIFByb21pc2VdID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxudmFyIGluc3RhbGxlZENodW5rcyA9IHtcblx0MTc5OiAwXG59O1xuXG4vLyBubyBjaHVuayBvbiBkZW1hbmQgbG9hZGluZ1xuXG4vLyBubyBwcmVmZXRjaGluZ1xuXG4vLyBubyBwcmVsb2FkZWRcblxuLy8gbm8gSE1SXG5cbi8vIG5vIEhNUiBtYW5pZmVzdFxuXG4vLyBubyBvbiBjaHVua3MgbG9hZGVkXG5cbi8vIG5vIGpzb25wIGZ1bmN0aW9uIiwiZXhwb3J0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKGRhdGEsIHNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2spIHtcclxuICAgIHRoaXMuX2ltYWdlVXJsID0gZGF0YS5pbWFnZVVybDtcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9zZWxlY3RvciA9IHNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gIH1cclxuXHJcbiAgX2dlbmVyYXRlVGVtcGxhdGUoKSB7XHJcbiAgICByZXR1cm4gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gIH1cclxuXHJcbiAgX2FkZExpa2VMaXN0ZW5lcigpIHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b25FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2xpa2VCdXR0b25FbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoXCJlbGVtZW50X19saWtlX2FjdGl2ZVwiKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3NldERlbGV0ZUxpc3RlbmVyKCkge1xyXG4gICAgY29uc3QgY2FyZERlbGV0ZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLmVsZW1lbnRfX2RlbGV0ZS1idXR0b25cIlxyXG4gICAgKTtcclxuICAgIGNhcmREZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgX3NldFByZXZpZXdMaXN0ZW5lcigpIHtcclxuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soeyBuYW1lOiB0aGlzLl9uYW1lLCBpbWFnZVVybDogdGhpcy5faW1hZ2VVcmwgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fYWRkTGlrZUxpc3RlbmVyKCk7XHJcbiAgICB0aGlzLl9zZXREZWxldGVMaXN0ZW5lcigpO1xyXG4gICAgdGhpcy5fc2V0UHJldmlld0xpc3RlbmVyKCk7XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2dlbmVyYXRlVGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX2xpa2VCdXR0b25FbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19saWtlXCIpO1xyXG4gICAgdGhpcy5faW1hZ2VFbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5zcmMgPSB0aGlzLl9pbWFnZVVybDtcclxuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJjb25zdCBreWl2VXJsID0gbmV3IFVSTCgnLi4vaW1hZ2VzL2t5aXYuanBnJywgaW1wb3J0Lm1ldGEudXJsKTtcclxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICAgIHtcclxuICAgICAgICBuYW1lOiAn0JDQvNGB0YLQtdGA0LTQsNC8JyxcclxuICAgICAgICBpbWFnZVVybDogJ2h0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTg0MDAzNTY0OTExLWE3YTMyMWM4NGUxYz9peGxpYj1yYi0xLjIuMSZpeGlkPU1ud3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4JmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9OTg0JnE9ODAnXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6ICfQmtC40LXQsicsXHJcbiAgICAgICAgaW1hZ2VVcmw6IGt5aXZVcmxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogJ9Cc0LDRgdGB0LDRh9GD0YHQtdGC0YHQutC40Lkg0YLQtdGF0L3QvtC70L7Qs9C40YfQtdGB0LrQuNC5INC40L3RgdGC0LjRgtGD0YInLFxyXG4gICAgICAgIGltYWdlVXJsOiAnaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1Mjk0MzcxMDc0NDUtNzE3YmY2M2Q4MDYyP2l4bGliPXJiLTEuMi4xJml4aWQ9TW53eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDgmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz02ODcmcT04MCdcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogJ9Ce0YHQsNC60LAnLFxyXG4gICAgICAgIGltYWdlVXJsOiAnaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1NzU0ODkxMjk2ODMtNGY3ZDIzMzc5OTc1P2l4bGliPXJiLTEuMi4xJml4aWQ9TW53eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDgmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz03MzUmcT04MCdcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogJ9Ch0LjQvdCz0LDQv9GD0YAnLFxyXG4gICAgICAgIGltYWdlVXJsOiAnaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MDU2NjI2OTUxODEtZDRiNjAzNjNkMmEzP2l4bGliPXJiLTEuMi4xJml4aWQ9TW53eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDgmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz0xMDEzJnE9ODAnXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6ICfQndGM0Y4t0JnQvtGA0LonLFxyXG4gICAgICAgIGltYWdlVXJsOiAnaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MjQwOTkxNjMyNTMtMzJiN2YwMjU2ODY4P2l4bGliPXJiLTEuMi4xJml4aWQ9TW53eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDgmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz02ODcmcT04MCdcclxuICAgIH1cclxuXTsiLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gdmFsaWRhdGlvbkNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gdmFsaWRhdGlvbkNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHZhbGlkYXRpb25Db25maWcuaW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdmFsaWRhdGlvbkNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIF9jaGVja1ZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfVxyXG5cclxuICBfZGlzYWJsZVN1Ym1pdEJ1dHRvbigpIHtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuICBfZW5hYmxlU3VibWl0QnV0dG9uKCkge1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fZW5hYmxlU3VibWl0QnV0dG9uKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0bmVycygpIHtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrVmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdG5lcnMoKTtcclxuICB9XHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuICBfY2xlYXIoKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcclxuICB9XHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9jbGVhcigpO1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKGRhdGEsIHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fb3BlbmVkQ2xhc3MgPSBkYXRhLm9wZW5lZENsYXNzO1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoZGF0YS5jbG9zZUJ1dHRvblNlbGVjdG9yKTtcclxuICB9XHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC5jb2RlID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fb3BlbmVkQ2xhc3MpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9vcGVuZWRDbGFzcyk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG4gIF9oYW5kbGVDbG9zZUJ5Q2xpY2soZXZ0KSB7XHJcbiAgICBpZiAoZXZ0LnRhcmdldCA9PT0gZXZ0LmN1cnJlbnRUYXJnZXQpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmNsb3NlLmJpbmQodGhpcykpO1xyXG4gICAgdGhpcy5fZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICBcIm1vdXNlZG93blwiLFxyXG4gICAgICB0aGlzLl9oYW5kbGVDbG9zZUJ5Q2xpY2suYmluZCh0aGlzKVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3RvcihkYXRhLCBwb3B1cHNTZWxlY3RvciwgY2FsbGJhY2tzKSB7XHJcbiAgICBzdXBlcihkYXRhLCBwb3B1cHNTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihkYXRhLmZvcm1TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGRhdGEuaW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gY2FsbGJhY2tzLmhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgfVxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIHRoaXMuX2lucHV0RGF0YSA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2lucHV0RGF0YVtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXREYXRhO1xyXG4gIH1cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpO1xyXG4gIH1cclxuICBzZXRJbnB1dFZhbHVlcyhpbnB1dERhdGEpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dC52YWx1ZSA9IGlucHV0RGF0YVtpbnB1dC5uYW1lXTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwXCI7XHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3RvcihkYXRhLCBwb3B1cHNTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIoZGF0YSwgcG9wdXBzU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoZGF0YS5uYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faW1hZ2VFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKGRhdGEuaW1hZ2VTZWxlY3Rvcik7XHJcbiAgfVxyXG4gIG9wZW4oeyBuYW1lLCBpbWFnZVVybCB9KSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuYWx0ID0gbmFtZTtcclxuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5zcmMgPSBpbWFnZVVybDtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3RvcihkYXRhKSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGF0YS5uYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fYmlvRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGF0YS5iaW9TZWxlY3Rvcik7XHJcbiAgfVxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgIGJpbzogdGhpcy5fYmlvRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG4gIHNldFVzZXJJbmZvKHtuYW1lLCBiaW99KSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9iaW9FbGVtZW50LnRleHRDb250ZW50ID0gYmlvO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19zYXZlLWJ0blwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiYnV0dG9uX2luYWN0aXZlXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbn07XHJcbmV4cG9ydCBjb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xyXG5leHBvcnQgY29uc3QgcG9wdXBzQ29uZmlnID0ge1xyXG4gIG9wZW5lZENsYXNzOiBcInBvcHVwX29wZW5lZFwiLFxyXG4gIGNsb3NlQnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19jbG9zZS1idG5cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcclxuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXHJcbiAgbmFtZVNlbGVjdG9yOiBcIi5wb3B1cF9faW1hZ2UtbmFtZVwiLFxyXG4gIGltYWdlU2VsZWN0b3I6IFwiLnBvcHVwX19pbWFnZVwiXHJcbn0iLCJpbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgeyBpbml0aWFsQ2FyZHMgfSBmcm9tIFwiLi4vdXRpbHMvaW5pdGlhbC1jYXJkcy5qc1wiO1xyXG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhGb3JtIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhJbWFnZSB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IHsgdmFsaWRhdGlvbkNvbmZpZywgZm9ybVZhbGlkYXRvcnMsIHBvcHVwc0NvbmZpZyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fbmFtZVwiLFxyXG4gIGJpb1NlbGVjdG9yOiBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxyXG59KTtcclxuY29uc3QgdXNlclBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXBzQ29uZmlnLCBcIi5wb3B1cF90eXBlX3Byb2ZpbGVcIiwge1xyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChpbnB1dERhdGEpID0+IHtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGlucHV0RGF0YSk7XHJcbiAgfSxcclxufSk7XHJcbnVzZXJQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5kb2N1bWVudFxyXG4gIC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnRuXCIpXHJcbiAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICB1c2VyUG9wdXAuc2V0SW5wdXRWYWx1ZXModXNlckluZm8uZ2V0VXNlckluZm8oKSk7XHJcbiAgICB1c2VyUG9wdXAub3BlbigpO1xyXG4gIH0pO1xyXG4vL9GA0LDQsdC+0YLQsCDQv9C+0L/QsNC/0LAg0YEg0L/RgNC10LLRjNGOXHJcbmNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKHBvcHVwc0NvbmZpZywgXCIucG9wdXBfdHlwZV9pbWFnZVwiKTtcclxucG9wdXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuY29uc3Qgb3BlbkltYWdlUHJldmlld1BvcHVwID0gKGNhcmREYXRhKSA9PiB7XHJcbiAgcG9wdXBXaXRoSW1hZ2Uub3BlbihjYXJkRGF0YSk7XHJcbn07XHJcbi8v0YTRg9C90LrRhtC40Y8g0YHQvtC30LTQsNC90LjRjyDQutCw0YDRgtC+0YfQutC4XHJcbmNvbnN0IGNyZWF0ZUNhcmQgPSAoZGF0YSkgPT4ge1xyXG4gIGNvbnN0IG5ld0NhcmQgPSBuZXcgQ2FyZChcclxuICAgIGRhdGEsXHJcbiAgICBcIiNlbGVtZW50LXRlbXBsYXRlXCIsXHJcbiAgICBvcGVuSW1hZ2VQcmV2aWV3UG9wdXBcclxuICApO1xyXG4gIHJldHVybiBuZXdDYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG59XHJcbi8v0YHQvtC30LTQsNC90LjQtSDQv9C10YDQstC+0L3QsNGH0LDQu9GM0L3Ri9GFINC60LDRgNGC0L7Rh9C10LpcclxuY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XHJcbiAgICAgIGNhcmRMaXN0LmFkZEl0ZW0oY3JlYXRlQ2FyZChpdGVtKSk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgXCIuZWxlbWVudHNfX2xpc3RcIlxyXG4pO1xyXG5jYXJkTGlzdC5yZW5kZXJJdGVtcygpO1xyXG5jb25zdCBuZXdFbGVtZW50UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cHNDb25maWcsIFwiLnBvcHVwX3R5cGVfbmV3LWVsZW1lbnRcIiwge1xyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChpbnB1dERhdGEpID0+IHtcclxuICAgIGNhcmRMaXN0LmFkZEl0ZW0oY3JlYXRlQ2FyZChpbnB1dERhdGEpKTtcclxuICB9LFxyXG59KTtcclxubmV3RWxlbWVudFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmRvY3VtZW50XHJcbiAgLnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fcG9zdC1hZGRcIilcclxuICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgIGZvcm1WYWxpZGF0b3JzW1wiY2FyZC1mb3JtXCJdLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gICAgbmV3RWxlbWVudFBvcHVwLm9wZW4oKTtcclxuICB9KTtcclxuLy8g0JLQutC70Y7Rh9C10L3QuNC1INCy0LDQu9C40LTQsNGG0LjQuFxyXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xyXG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpKTtcclxuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xyXG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtRWxlbWVudCk7XHJcbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XHJcbiAgICBmb3JtVmFsaWRhdG9yc1tmb3JtTmFtZV0gPSB2YWxpZGF0b3I7XHJcbiAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4gIH0pO1xyXG59O1xyXG5lbmFibGVWYWxpZGF0aW9uKHZhbGlkYXRpb25Db25maWcpOyJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIm0iLCJnIiwiZ2xvYmFsVGhpcyIsInRoaXMiLCJGdW5jdGlvbiIsImUiLCJ3aW5kb3ciLCJvIiwib2JqIiwicHJvcCIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInNjcmlwdFVybCIsImltcG9ydFNjcmlwdHMiLCJsb2NhdGlvbiIsImRvY3VtZW50IiwiY3VycmVudFNjcmlwdCIsInNyYyIsInNjcmlwdHMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImxlbmd0aCIsIkVycm9yIiwicmVwbGFjZSIsInAiLCJiIiwiYmFzZVVSSSIsInNlbGYiLCJocmVmIiwiQ2FyZCIsImRhdGEiLCJzZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsIl9pbWFnZVVybCIsImltYWdlVXJsIiwiX25hbWUiLCJuYW1lIiwiX3NlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2xpa2VCdXR0b25FbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl9jYXJkRWxlbWVudCIsInJlbW92ZSIsIl9pbWFnZUVsZW1lbnQiLCJfYWRkTGlrZUxpc3RlbmVyIiwiX3NldERlbGV0ZUxpc3RlbmVyIiwiX3NldFByZXZpZXdMaXN0ZW5lciIsIl9nZW5lcmF0ZVRlbXBsYXRlIiwiYWx0IiwidGV4dENvbnRlbnQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJpbml0aWFsQ2FyZHMiLCJVUkwiLCJGb3JtVmFsaWRhdG9yIiwidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2Zvcm1FbGVtZW50IiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9idXR0b25FbGVtZW50Iiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbnB1dEVsZW1lbnQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJpZCIsImFkZCIsImRpc2FibGVkIiwic29tZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfZGlzYWJsZVN1Ym1pdEJ1dHRvbiIsIl9lbmFibGVTdWJtaXRCdXR0b24iLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiX2NoZWNrVmFsaWRpdHkiLCJfc2V0RXZlbnRMaXN0bmVycyIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiaW5uZXJIVE1MIiwiX2NsZWFyIiwiaXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiZXZ0IiwiY29kZSIsImNsb3NlIiwiX2VsZW1lbnQiLCJfb3BlbmVkQ2xhc3MiLCJvcGVuZWRDbGFzcyIsIl9jbG9zZUJ1dHRvbiIsImNsb3NlQnV0dG9uU2VsZWN0b3IiLCJfaGFuZGxlRXNjQ2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsImJpbmQiLCJfaGFuZGxlQ2xvc2VCeUNsaWNrIiwiUG9wdXBXaXRoRm9ybSIsInBvcHVwc1NlbGVjdG9yIiwiY2FsbGJhY2tzIiwiZm9ybVNlbGVjdG9yIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJoYW5kbGVGb3JtU3VibWl0IiwiX2lucHV0RGF0YSIsImlucHV0IiwidmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiaW5wdXREYXRhIiwiUG9wdXBXaXRoSW1hZ2UiLCJfbmFtZUVsZW1lbnQiLCJuYW1lU2VsZWN0b3IiLCJpbWFnZVNlbGVjdG9yIiwiZm9ybVZhbGlkYXRvcnMiLCJwb3B1cHNDb25maWciLCJ1c2VySW5mbyIsIl9iaW9FbGVtZW50IiwiYmlvU2VsZWN0b3IiLCJiaW8iLCJ1c2VyUG9wdXAiLCJzZXRVc2VySW5mbyIsInNldEV2ZW50TGlzdGVuZXJzIiwic2V0SW5wdXRWYWx1ZXMiLCJnZXRVc2VySW5mbyIsIm9wZW4iLCJwb3B1cFdpdGhJbWFnZSIsIm9wZW5JbWFnZVByZXZpZXdQb3B1cCIsImNhcmREYXRhIiwiY3JlYXRlQ2FyZCIsImdlbmVyYXRlQ2FyZCIsImNhcmRMaXN0IiwiYWRkSXRlbSIsInJlbmRlckl0ZW1zIiwiY29uZmlnIiwibmV3RWxlbWVudFBvcHVwIiwicmVzZXRWYWxpZGF0aW9uIiwidmFsaWRhdG9yIiwiZm9ybU5hbWUiLCJnZXRBdHRyaWJ1dGUiLCJlbmFibGVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==